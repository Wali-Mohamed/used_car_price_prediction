<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Price Predictor</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS - All styles go here -->
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --background-color: #ecf0f1;
            --form-background: #ffffff;
            --text-color: #2c3e50;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .main-title {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .prediction-form {
            background-color: var(--form-background);
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .form-label {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .form-select, .form-control {
            border: 2px solid #e9ecef;
            padding: 0.75rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .form-select:focus, .form-control:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
        }

        .btn-primary {
            background-color: var(--secondary-color);
            border: none;
            padding: 12px 24px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-box {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: scale(0.95);
            transition: all 0.3s ease;
            display: none;
        }

        .result-box.show {
            transform: scale(1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .header-bg {
            background-color: var(--primary-color);
            padding: 2rem 0;
            margin-bottom: 3rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header-title {
            color: white;
            margin: 0;
            text-align: center;
        }

        .prediction-form:hover {
            transform: translateY(-5px);
            transition: transform 0.3s ease;
        }

        .form-select:hover {
            border-color: var(--secondary-color);
        }

        .section-title {
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary-color);
        }

        @media (max-width: 768px) {
            .prediction-form {
                padding: 1.5rem;
            }
            .main-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header-bg">
        <h1 class="header-title">Car Price Predictor</h1>
    </div>

    <!-- Main Content -->
    <div class="container py-4">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8">
                <div class="prediction-form">
                    <h2 class="section-title">Enter Car Details</h2>
                    <form id="predictionForm" method="POST">
                        <div class="row g-3">
                            <div class="col-12 col-md-6">
                                <label for="brand" class="form-label">Brand</label>
                                <select class="form-select" id="brand" name="brand" required>
                                    <option value="">Select Brand</option>
                                    <option value="abarth">Abarth</option>
                                    <option value="alfa">Alfa</option>
                                    <option value="audi">Audi</option>
                                    <option value="bmw">BMW</option>
                                    <option value="chevrolet">Chevrolet</option>
                                    <option value="chrysler">Chrysler</option>
                                    <option value="citroen">Citroen</option>
                                    <option value="dacia">Dacia</option>
                                    <option value="daewoo">Daewoo</option>
                                    <option value="daihatsu">Daihatsu</option>
                                    <option value="dodge">Dodge</option>
                                    <option value="ds">DS</option>
                                    <option value="fiat">Fiat</option>
                                    <option value="ford">Ford</option>
                                    <option value="honda">Honda</option>
                                    <option value="hyundai">Hyundai</option>
                                    <option value="infiniti">Infiniti</option>
                                    <option value="isuzu">Isuzu</option>
                                    <option value="jaguar">Jaguar</option>
                                    <option value="jeep">Jeep</option>
                                    <option value="kia">Kia</option>
                                    <option value="lagonda">Lagonda</option>
                                    <option value="land">Land</option>
                                    <option value="lexus">Lexus</option>
                                    <option value="marcos">Marcos</option>
                                    <option value="maserati">Maserati</option>
                                    <option value="mazda">Mazda</option>
                                    <option value="mercedes-benz">Mercedes-Benz</option>
                                    <option value="mg">MG</option>
                                    <option value="mini">Mini</option>
                                    <option value="mitsubishi">Mitsubishi</option>
                                    <option value="nissan">Nissan</option>
                                    <option value="peugeot">Peugeot</option>
                                    <option value="porsche">Porsche</option>
                                    <option value="proton">Proton</option>
                                    <option value="renault">Renault</option>
                                    <option value="rover">Rover</option>
                                    <option value="saab">Saab</option>
                                    <option value="seat">Seat</option>
                                    <option value="skoda">Skoda</option>
                                    <option value="smart">Smart</option>
                                    <option value="ssangyong">Ssangyong</option>
                                    <option value="subaru">Subaru</option>
                                    <option value="suzuki">Suzuki</option>
                                    <option value="toyota">Toyota</option>
                                    <option value="vauxhall">Vauxhall</option>
                                    <option value="volkswagen">Volkswagen</option>
                                    <option value="volvo">Volvo</option>
                                </select>
                            </div>

                            <!-- Mileage -->
                            <div class="col-12 col-md-6">
                                <label for="mileage" class="form-label">Mileage (miles)</label>
                                <input type="number" class="form-control" id="mileage" name="mileage" min="0" max="500000" required>
                            </div>

                            <!-- Registration Year -->
                            <div class="col-12 col-md-6">
                                <label for="registration_year" class="form-label">Registration Year:</label>
                            <input type="number" class="form-control" id="registration_year" name="registration_year" required min="1953" max="2025" step="1" placeholder="Enter year (1953-2025)">
                            <small id="yearError" style="color: red; display: none;">Please enter a valid year between 1953 and 2023.</small>

                                <!-- <label for="registration_year" class="form-label">Registration Year</label>
                                <select class="form-select" id="registration_year" name="registration_year" required>
                                    <option value="">Select Year</option>
                                    <option value="1953">1953</option>
                                    <option value="1972">1972</option>
                                    <option value="1981">1981</option>
                                    <option value="1985">1985</option>
                                    <option value="1987">1987</option>
                                    <option value="1988">1988</option>
                                    <option value="1989">1989</option>
                                    <option value="1990">1990</option>
                                    <option value="1991">1991</option>
                                    <option value="1992">1992</option>
                                    <option value="1993">1993</option>
                                    <option value="1995">1995</option>
                                    <option value="1996">1996</option>
                                    <option value="1997">1997</option>
                                    <option value="1998">1998</option>
                                    <option value="1999">1999</option>
                                    <option value="2000">2000</option>
                                    <option value="2001">2001</option>
                                    <option value="2002">2002</option>
                                    <option value="2003">2003</option>
                                    <option value="2004">2004</option>
                                    <option value="2005">2005</option>
                                    <option value="2006">2006</option>
                                    <option value="2007">2007</option>
                                    <option value="2008">2008</option>
                                    <option value="2009">2009</option>
                                    <option value="2010">2010</option>
                                    <option value="2011">2011</option>
                                    <option value="2012">2012</option>
                                    <option value="2013">2013</option>
                                    <option value="2014">2014</option>
                                    <option value="2015">2015</option>
                                    <option value="2016">2016</option>
                                    <option value="2017">2017</option>
                                    <option value="2018">2018</option>
                                    <option value="2019">2019</option>
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                </select> -->
                            </div>

                            <!-- Previous Owners -->
                            <div class="col-12 col-md-6">
                                <label for="previous_owners" class="form-label">Previous Owners</label>
                                <select class="form-select" id="previous_owners" name="previous_owners" required>
                                    <option value="">Select Number of Previous Owners</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                </select>
                            </div>

                            <!-- Fuel Type -->
                            <div class="col-12 col-md-6">
                                <label for="fuel_type" class="form-label">Fuel Type</label>
                                <select class="form-select" id="fuel_type" name="fuel_type" required>
                                    <option value="">Select Fuel Type</option>
                                    <option value="diesel">Diesel</option>
                                    <option value="petrol">Petrol</option>
                                    <option value="petrol_plug-in_hybrid">Petrol Plug-in Hybrid</option>
                                    <option value="petrol_hybrid">Petrol Hybrid</option>
                                    <option value="electric">Electric</option>
                                    <option value="diesel_hybrid">Diesel Hybrid</option>
                                </select>
                            </div>

                            <!-- Body Type -->
                            <div class="col-12 col-md-6">
                                <label for="body_type" class="form-label">Body Type</label>
                                <select class="form-select" id="body_type" name="body_type" required>
                                    <option value="">Select Body Type</option>
                                    <option value="hatchback">Hatchback</option>
                                    <option value="coupe">Coupe</option>
                                    <option value="estate">Estate</option>
                                    <option value="saloon">Saloon</option>
                                    <option value="convertible">Convertible</option>
                                    <option value="mpv">MPV</option>
                                    <option value="suv">SUV</option>
                                    <option value="minibus">Minibus</option>
                                    <option value="combi_van">Combi Van</option>
                                    <option value="pickup">Pickup</option>
                                </select>
                            </div>

                            <!-- Engine Size -->
                            <div class="col-12 col-md-6">
                                <label for="engine_size" class="form-label">Engine Size</label>
                                <select class="form-select" id="engine_size" name="engine_size" required>
                                    <option value="">Select Engine Size</option>
                                    <option value="0.8l">0.8L</option>
                                    <option value="0.9l">0.9L</option>
                                    <option value="1.0l">1.0L</option>
                                    <option value="1.1l">1.1L</option>
                                    <option value="1.2l">1.2L</option>
                                    <option value="1.3l">1.3L</option>
                                    <option value="1.4l">1.4L</option>
                                    <option value="1.5l">1.5L</option>
                                    <option value="1.6l">1.6L</option>
                                    <option value="1.7l">1.7L</option>
                                    <option value="1.8l">1.8L</option>
                                    <option value="1.9l">1.9L</option>
                                    <option value="2.0l">2.0L</option>
                                    <option value="2.1l">2.1L</option>
                                    <option value="2.2l">2.2L</option>
                                    <option value="2.3l">2.3L</option>
                                    <option value="2.4l">2.4L</option>
                                    <option value="2.5l">2.5L</option>
                                    <option value="2.6l">2.6L</option>
                                    <option value="2.7l">2.7L</option>
                                    <option value="2.8l">2.8L</option>
                                    <option value="3.0l">3.0L</option>
                                    <option value="3.1l">3.1L</option>
                                    <option value="3.2l">3.2L</option>
                                    <option value="3.3l">3.3L</option>
                                    <option value="3.5l">3.5L</option>
                                    <option value="3.7l">3.7L</option>
                                    <option value="4.2l">4.2L</option>
                                    <option value="4.3l">4.3L</option>
                                    <option value="4.4l">4.4L</option>
                                    <option value="4.8l">4.8L</option>
                                    <option value="5.0l">5.0L</option>
                                    <option value="5.5l">5.5L</option>
                                    <option value="6.3l">6.3L</option>
                                </select>
                            </div>

                            <!-- Gearbox -->
                            <div class="col-12 col-md-6">
                                <label for="gearbox" class="form-label">Gearbox</label>
                                <select class="form-select" id="gearbox" name="gearbox" required>
                                    <option value="">Select Gearbox</option>
                                    <option value="manual">Manual</option>
                                    <option value="automatic">Automatic</option>
                                </select>
                            </div>

                            <!-- Doors -->
                            <div class="col-12 col-md-4">
                                <label for="doors" class="form-label">Doors</label>
                                <select class="form-select" id="doors" name="doors" required>
                                    <option value="">Select Doors</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>

                            <!-- Seats -->
                            <div class="col-12 col-md-4">
                                <label for="seats" class="form-label">Seats</label>
                                <select class="form-select" id="seats" name="seats" required>
                                    <option value="">Select Seats</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                </select>
                            </div>

                            <!-- Emission Class -->
                            <div class="col-12 col-md-4">
                                <label for="emission_class" class="form-label">Emission Class</label>
                                <select class="form-select" id="emission_class" name="emission_class" required>
                                    <option value="">Select Emission Class</option>
                                    <option value="euro_1">Euro 1</option>
                                    <option value="euro_2">Euro 2</option>
                                    <option value="euro_3">Euro 3</option>
                                    <option value="euro_4">Euro 4</option>
                                    <option value="euro_5">Euro 5</option>
                                    <option value="euro_6">Euro 6</option>
                                </select>
                            </div>

                            <!-- Service History -->
                            <div class="col-12">
                                <label for="service_history" class="form-label">Service History</label>
                                <select class="form-select" id="service_history" name="service_history" required>
                                    <option value="">Select Service History</option>
                                    <option value="unknown">Unknown</option>
                                    <option value="full">Full</option>
                                </select>
                            </div>

                            <div class="col-12">
                                <button type="submit" class="btn btn-primary w-100">Predict Price</button>
                            </div>
                        </div>
                    </form>

                    <div class="result-box" id="result">
                        <h3 class="mb-0">Estimated Price: £<span id="predicted-price">0</span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                document.getElementById('predicted-price').textContent = result.price.toLocaleString();
                const resultBox = document.getElementById('result');
                resultBox.style.display = 'block';
                setTimeout(() => resultBox.classList.add('show'), 100);
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while making the prediction.');
            }
        });
    </script>
</body>
</html>